

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>feeling-blue Documentation &mdash; feeling-blue 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home" alt="Documentation Home"> feeling-blue
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Usage and examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo/demo.html">How to use and examples!</a><ul>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#read-this-before-starting">Read this before starting</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#connecting-to-your-device">Connecting to your device</a><ul>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#central-initialization">Central initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#search-for-peripheral">Search for peripheral</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#search-for-services">Search for services</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#search-for-characteristics">Search for characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#code">Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#connecting-to-multiple-devices">Connecting to multiple devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#reading-characteristic-value">Reading characteristic value</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#writing-to-characteristic">Writing to characteristic</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#notifying-characteristic">Notifying characteristic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#non-member-function-event-handler">Non-member function event handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="demo/demo.html#member-function-event-handler">Member function event handler</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="demo/demo.html#supported-template-types">Supported Template Types</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="API/central.html">Central</a></li>
<li class="toctree-l1"><a class="reference internal" href="API/peripheral.html">Peripheral</a></li>
<li class="toctree-l1"><a class="reference internal" href="API/service.html">Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="API/characteristic.html">Characteristic</a></li>
<li class="toctree-l1"><a class="reference internal" href="template_types.html">Supported Template Types</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">feeling-blue</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
        
      <li>feeling-blue Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="feeling-blue-documentation">
<h1>feeling-blue Documentation<a class="headerlink" href="#feeling-blue-documentation" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://travis-ci.com/seanngpack/feeling-blue-cpp"><img alt="build" src="https://travis-ci.com/seanngpack/feeling-blue-cpp.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://github.com/seanngpack/feeling-blue-cpp"><img alt="license" src="https://img.shields.io/github/license/seanngpack/feeling-blue-cpp" /></a>
<p><a class="reference external" href="http://www.github.com/seanngpack/feeling-blue-cpp">feeling-blue</a> was created because of a lack of resources for the non-expert on how
to connect to a bluetooth device using C++. The API was carefully designed to be easy-to-use,
yet feature-rich so you can take advantage of your bluetooth peripherals without learning
the nuisances of bluetoothLE. Okay, enough talking–let’s get started!</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Download and build:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone https://github.com/seanngpack/feeling-blue-cpp/
<span class="gp">$</span> <span class="nb">cd</span> feeling-blue-cpp
<span class="gp">$</span> mkdir build
<span class="gp">$</span> <span class="nb">cd</span> build
<span class="gp">$</span> cmake ..
<span class="gp">$</span> sudo make install
</pre></div>
</div>
<p>To use feeling-blue in your project, you gotta use cmake. Just call <code class="docutils literal notranslate"><span class="pre">find_package</span></code>
and link the library. Here is what your CMakeLists.txt might look like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake_minimum_required(VERSION 3.17)</span>
<span class="go">project(yourProject)</span>

<span class="go">set(CMAKE_CXX_STANDARD 17)</span>

<span class="go">find_package(feeling-blue REQUIRED)</span>

<span class="go">add_executable(yourProject main.cpp)</span>
<span class="go">target_link_libraries(yourProject PUBLIC feeling-blue)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-to-use-and-examples">
<h1>How to use and examples!<a class="headerlink" href="#how-to-use-and-examples" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#read-this-before-starting" id="id1">Read this before starting</a></p></li>
<li><p><a class="reference internal" href="#connecting-to-your-device" id="id2">Connecting to your device</a></p>
<ul>
<li><p><a class="reference internal" href="#central-initialization" id="id3">Central initialization</a></p></li>
<li><p><a class="reference internal" href="#search-for-peripheral" id="id4">Search for peripheral</a></p></li>
<li><p><a class="reference internal" href="#search-for-services" id="id5">Search for services</a></p></li>
<li><p><a class="reference internal" href="#search-for-characteristics" id="id6">Search for characteristics</a></p></li>
<li><p><a class="reference internal" href="#code" id="id7">Code</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#connecting-to-multiple-devices" id="id8">Connecting to multiple devices</a></p></li>
<li><p><a class="reference internal" href="#reading-characteristic-value" id="id9">Reading characteristic value</a></p></li>
<li><p><a class="reference internal" href="#writing-to-characteristic" id="id10">Writing to characteristic</a></p></li>
<li><p><a class="reference internal" href="#notifying-characteristic" id="id11">Notifying characteristic</a></p>
<ul>
<li><p><a class="reference internal" href="#non-member-function-event-handler" id="id12">Non-member function event handler</a></p></li>
<li><p><a class="reference internal" href="#member-function-event-handler" id="id13">Member function event handler</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#public-api" id="id14">Public API</a></p></li>
</ul>
</div>
<div class="section" id="read-this-before-starting">
<h2><a class="toc-backref" href="#id1">Read this before starting</a><a class="headerlink" href="#read-this-before-starting" title="Permalink to this headline">¶</a></h2>
<p>When you create a new <code class="docutils literal notranslate"><span class="pre">Central</span></code> object, feeling-blue creates it on another thread.
So <strong>you must keep your project’s main thread alive</strong> with some mechanism or else
your program will exit immediately before you get to make bluetooth calls. If you want a quick
and dirty way to demo the library, then just use a simple <code class="docutils literal notranslate"><span class="pre">while</span></code> loop to keep your main thread
busy.</p>
<p>feeling-blue uses NSLog to display messages to your console. These messages may display out of order
relative to your cout statements. But the code still runs in the order that you write it.</p>
</div>
<div class="section" id="connecting-to-your-device">
<h2><a class="toc-backref" href="#id2">Connecting to your device</a><a class="headerlink" href="#connecting-to-your-device" title="Permalink to this headline">¶</a></h2>
<p>Connecting to your device only takes a couple steps!</p>
<div class="section" id="central-initialization">
<h3><a class="toc-backref" href="#id3">Central initialization</a><a class="headerlink" href="#central-initialization" title="Permalink to this headline">¶</a></h3>
<p>To connect to your device, you must first initialize a <code class="docutils literal notranslate"><span class="pre">Central</span></code>. The central represents your
computer and it manages <code class="docutils literal notranslate"><span class="pre">Peripheral</span></code>. Then you start up bluetooth.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span> <span class="n">central</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">central</span><span class="o">-&gt;</span><span class="n">start_bluetooth</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="search-for-peripheral">
<h3><a class="toc-backref" href="#id4">Search for peripheral</a><a class="headerlink" href="#search-for-peripheral" title="Permalink to this headline">¶</a></h3>
<p>The peripheral represents the device you want to connect to. There is a limit to one
peripheral per central. You can spawn more instances of central to connect to more devices.</p>
<p>To connect to a peripheral, you call the <code class="docutils literal notranslate"><span class="pre">find_peripheral()</span></code> method. If you know your device is advertising its localName,
you can pass its name to find it:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Peripheral</span><span class="o">&gt;</span> <span class="n">peripheral</span> <span class="o">=</span> <span class="n">central</span><span class="o">-&gt;</span><span class="n">find_peripheral</span><span class="p">(</span><span class="s">&quot;SwagScanner&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can also connect to your peripheral if you know the 128-bit UUIDs of the <strong>services</strong> that it advertises.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="nl">std</span><span class="p">:</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">uuids</span> <span class="o">=</span> <span class="p">{</span><span class="n">service_uuid1</span><span class="p">,</span> <span class="n">service_uuid2</span><span class="p">,</span> <span class="n">etc</span><span class="p">}</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Peripheral</span><span class="o">&gt;</span> <span class="n">peripheral</span> <span class="o">=</span> <span class="n">central</span><span class="o">-&gt;</span><span class="n">find_peripheral</span><span class="p">(</span><span class="n">uuids</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="search-for-services">
<h3><a class="toc-backref" href="#id5">Search for services</a><a class="headerlink" href="#search-for-services" title="Permalink to this headline">¶</a></h3>
<p>Peripherals can have many services. A service holds a collection of <code class="docutils literal notranslate"><span class="pre">Characteristics</span></code>, so a a serivce is
a logical grouping of characteristics. A service may contain a service, but that is currently not officially supported,
however…it may work.</p>
<p>To connect to a service, you call the <code class="docutils literal notranslate"><span class="pre">find_service</span></code> method and pass in its UUID as a std::string:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Service</span><span class="o">&gt;</span> <span class="n">service</span> <span class="o">=</span> <span class="n">peripheral</span><span class="o">-&gt;</span><span class="n">find_service</span><span class="p">(</span><span class="n">service_uuid</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="search-for-characteristics">
<h3><a class="toc-backref" href="#id6">Search for characteristics</a><a class="headerlink" href="#search-for-characteristics" title="Permalink to this headline">¶</a></h3>
<p>A Characteristic holds a value. feeling-blue stores this as a byte array. It is up to you
to know how to convert this data into something human-readable, a string representation for instance.
Future updates will include built-in functionality with the option to make it human-readable, but for now just byte the bullet.</p>
<p>Characteristic values can be read or written. A characteristic may also have <strong>notifications</strong> enabled
meaning when the value is updated, it will notify your peripheral and send data to it.</p>
<p>To connect to a characteristic, call the <code class="docutils literal notranslate"><span class="pre">find_characteristic</span></code> method on the service that the characteristic belongs to
and pass in the characteristic’s UUID as a std::string:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Characteristic</span><span class="o">&gt;</span> <span class="n">rotate_char</span> <span class="o">=</span> <span class="n">service</span><span class="o">-&gt;</span><span class="n">find_characteristic</span><span class="p">(</span><span class="n">characteristic_uuid</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="code">
<h3><a class="toc-backref" href="#id7">Code</a><a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">main</span><span class="p">.</span><span class="n">cpp</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">service_uuid</span> <span class="o">=</span> <span class="s">&quot;5ffba521-2363-41da-92f5-46adc56b2d37&quot;</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">char1_uuid</span> <span class="o">=</span> <span class="s">&quot;5ffba522-2363-41da-92f5-46adc56b2d37&quot;</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">char1_uuid</span> <span class="o">=</span> <span class="s">&quot;5ffba523-2363-41da-92f5-46adc56b2d37&quot;</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span> <span class="n">central</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">central</span><span class="o">-&gt;</span><span class="n">start_bluetooth</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Peripheral</span><span class="o">&gt;</span> <span class="n">peripheral</span> <span class="o">=</span> <span class="n">central</span><span class="o">-&gt;</span><span class="n">find_peripheral</span><span class="p">(</span><span class="s">&quot;SwagScanner&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Service</span><span class="o">&gt;</span> <span class="n">service</span> <span class="o">=</span> <span class="n">peripheral</span><span class="o">-&gt;</span><span class="n">find_service</span><span class="p">(</span><span class="n">service_uuid</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Characteristic</span><span class="o">&gt;</span> <span class="n">characteristic1</span> <span class="o">=</span> <span class="n">service</span><span class="o">-&gt;</span><span class="n">find_characteristic</span><span class="p">(</span><span class="n">char1_uuid</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Characteristic</span><span class="o">&gt;</span> <span class="n">characteristic2</span> <span class="o">=</span> <span class="n">service</span><span class="o">-&gt;</span><span class="n">find_characteristic</span><span class="p">(</span><span class="n">char2_uuid</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span><span class="n">blah</span> <span class="n">blah</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="connecting-to-multiple-devices">
<h2><a class="toc-backref" href="#id8">Connecting to multiple devices</a><a class="headerlink" href="#connecting-to-multiple-devices" title="Permalink to this headline">¶</a></h2>
<p>Okay, so you have multiple devices you want to connect to–no problem! As mentioned, a central can only manage one
peripheral at a time. So to connect more, just instantiate more centrals and run through the connection and discovery
steps again.</p>
<p>Below is some code creating two centrals and connecting them to their respective devices(I’ll leave connecting to services
and characteristics to you):</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">main</span><span class="p">.</span><span class="n">cpp</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span> <span class="n">smart_watch_central</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">smart_watch_central</span><span class="o">-&gt;</span><span class="n">start_bluetooth</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Peripheral</span><span class="o">&gt;</span> <span class="n">smart_watch</span> <span class="o">=</span> <span class="n">smart_watch_central</span><span class="o">-&gt;</span><span class="n">find_peripheral</span><span class="p">(</span><span class="s">&quot;SmartWatch&quot;</span><span class="p">);</span>
    <span class="p">...</span><span class="n">find</span> <span class="n">services</span> <span class="n">and</span> <span class="n">characteristics</span>

    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span> <span class="n">smart_clock_central</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Central</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="n">smart_clock_central</span><span class="o">-&gt;</span><span class="n">start_bluetooth</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Peripheral</span><span class="o">&gt;</span> <span class="n">smart_clock</span> <span class="o">=</span> <span class="n">smart_clock_central</span><span class="o">-&gt;</span><span class="n">find_peripheral</span><span class="p">(</span><span class="s">&quot;SmartClock&quot;</span><span class="p">);</span>
    <span class="p">...</span><span class="n">find</span> <span class="n">services</span> <span class="n">and</span> <span class="n">characteristics</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span><span class="n">blah</span> <span class="n">blah</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-characteristic-value">
<h2><a class="toc-backref" href="#id9">Reading characteristic value</a><a class="headerlink" href="#reading-characteristic-value" title="Permalink to this headline">¶</a></h2>
<p>Let’s get some data! To read the value of your characteristic, call the <code class="docutils literal notranslate"><span class="pre">read()</span></code> method. This method blocks
the calling thread until the data has been read from your characteristic and assigned to your variable. The read method
is templated and supports multiple types described in the <a class="reference internal" href="demo/demo.html#supported-template-types"><span class="std std-ref">Supported Template Types</span></a>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="n">characteristic</span><span class="o">-&gt;</span><span class="n">read</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span><span class="p">();</span>
</pre></div>
</div>
<p>If you want something more human-readable, and you know your device’s characteristic is represented in four bytes in
little-endian order, you just just read your data as an integer:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">data</span> <span class="o">=</span> <span class="n">characteristic</span><span class="o">-&gt;</span><span class="n">read</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
</pre></div>
</div>
<p>By default, you should read in your data into <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::byte&gt;</span></code> unless you know for sure your device is outputting
convertible types.</p>
</div>
<div class="section" id="writing-to-characteristic">
<h2><a class="toc-backref" href="#id10">Writing to characteristic</a><a class="headerlink" href="#writing-to-characteristic" title="Permalink to this headline">¶</a></h2>
<p>There are two main options to write to your device. First we can <code class="docutils literal notranslate"><span class="pre">write_without_response()</span></code> which writes to your
devices asynchronously and does not block your calling thread. If your write fails, you will not get a message
telling you that it failed. This method is templated and supports multiple types described in the <a class="reference internal" href="demo/demo.html#supported-template-types"><span class="std std-ref">Supported Template Types</span></a>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{...};</span>
<span class="n">characteristic</span><span class="o">-&gt;</span><span class="n">write_without_response</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</pre></div>
</div>
<p>And if you write with a response, then the method will block your calling thread and wait until your data has been
successfully written to the device.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{...};</span>
<span class="n">rotate_char</span><span class="o">-&gt;</span><span class="n">write_with_response</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</pre></div>
</div>
<p>Like the read() method, you can write to your device using different formats that will end up being converted to byte arrays.</p>
</div>
<div class="section" id="notifying-characteristic">
<h2><a class="toc-backref" href="#id11">Notifying characteristic</a><a class="headerlink" href="#notifying-characteristic" title="Permalink to this headline">¶</a></h2>
<p>If your device and characteristic supports notifications, then let’s use it. First, just double check that your characteristic
has notification support and that it’s enabled. So now when your device sends your computer notifications with a data payload you can capture
that payload and write your own function to do something with it!</p>
<div class="section" id="non-member-function-event-handler">
<h3><a class="toc-backref" href="#id12">Non-member function event handler</a><a class="headerlink" href="#non-member-function-event-handler" title="Permalink to this headline">¶</a></h3>
<p>Let’s write a callback event handler that takes in a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::byte&gt;</span></code> and enable notifications, passing the function as a parameter.</p>
<p>IMPORTANT! All event handlers must follow this signature: <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(std::vector&lt;std::byte&gt;)</span></code></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">print_data</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="k">const</span> <span class="o">&amp;</span><span class="nl">b</span> <span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">characteristic</span><span class="o">-&gt;</span><span class="n">set_notify</span><span class="p">(</span><span class="n">print_data</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="member-function-event-handler">
<h3><a class="toc-backref" href="#id13">Member function event handler</a><a class="headerlink" href="#member-function-event-handler" title="Permalink to this headline">¶</a></h3>
<p>member functions are a little trickier to write, but you just have to bind their class to std::function
and add a placeholder parameter, then pass it like normal.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">print_data</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="k">const</span> <span class="o">&amp;</span><span class="nl">b</span> <span class="p">:</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">set_notify</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Characteristic</span><span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">placeholders</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">byte</span><span class="o">&gt;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">binded_print_data</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">A</span><span class="o">::</span><span class="n">print_data</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">placeholders</span><span class="o">::</span><span class="n">_1</span><span class="p">);</span>
        <span class="n">characteristic</span><span class="o">-&gt;</span><span class="n">notify</span><span class="p">(</span><span class="n">binded_print_data</span><span class="p">);</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">bluetooth</span><span class="o">::</span><span class="n">Characteristic</span><span class="o">&gt;</span> <span class="n">characteristic</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Passing member functions is really powerful because you can do things such as update an instance variable when notified.</p>
<p>If you’re passing the same function to multiple characteristic notifications, then just make sure your function contents are
thread-safe, this applies to both member and non-member functions.</p>
</div>
</div>
<div class="section" id="public-api">
<h2><a class="toc-backref" href="#id14">Public API</a><a class="headerlink" href="#public-api" title="Permalink to this headline">¶</a></h2>
<p>Below is a list of classes available to you. Click on the sidebar to find out more.
All methods are synchronous unless otherwise noted!</p>
<dl class="cpp class">
<dt id="_CPPv4N9bluetooth9bluetooth7CentralE">
<span id="_CPPv3N9bluetooth9bluetooth7CentralE"></span><span id="_CPPv2N9bluetooth9bluetooth7CentralE"></span><span id="bluetooth::bluetooth::Central"></span><span class="target" id="classbluetooth_1_1_central"></span><em class="property">class </em><code class="sig-name descname">Central</code><br /></dt>
<dd></dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9bluetooth9bluetooth14CharacteristicE">
<span id="_CPPv3N9bluetooth9bluetooth14CharacteristicE"></span><span id="_CPPv2N9bluetooth9bluetooth14CharacteristicE"></span><span id="bluetooth::bluetooth::Characteristic"></span><span class="target" id="classbluetooth_1_1_characteristic"></span><em class="property">class </em><code class="sig-name descname">Characteristic</code><br /></dt>
<dd></dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9bluetooth9bluetooth10PeripheralE">
<span id="_CPPv3N9bluetooth9bluetooth10PeripheralE"></span><span id="_CPPv2N9bluetooth9bluetooth10PeripheralE"></span><span id="bluetooth::bluetooth::Peripheral"></span><span class="target" id="classbluetooth_1_1_peripheral"></span><em class="property">class </em><code class="sig-name descname">Peripheral</code><br /></dt>
<dd></dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N9bluetooth9bluetooth7ServiceE">
<span id="_CPPv3N9bluetooth9bluetooth7ServiceE"></span><span id="_CPPv2N9bluetooth9bluetooth7ServiceE"></span><span id="bluetooth::bluetooth::Service"></span><span class="target" id="classbluetooth_1_1_service"></span><em class="property">class </em><code class="sig-name descname">Service</code><br /></dt>
<dd></dd></dl>

<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installing.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, sean ng pack

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>